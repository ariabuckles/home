# This is Git's per-user configuration file.
[user]
    name = Aria Buckles
    email = aria@seesaw.me
[alias]
    rebase-package-lock = "!f() { git reset HEAD -- ${GIT_PREFIX}/package-lock.json && git checkout -- ${GIT_PREFIX}/package-lock.json && cd ${GIT_PREFIX} && npm install && git add -- package-lock.json; }; f"
    create-branch = "!git checkout -b $@ && git branch --set-upstream-to master && true"
    archive-branch = "!git branch --list \"$1*\" | xargs -t -I% git branch -m % $(echo % | sed 's/^/z-/') && true"
    clean-deployed-branches = "!git branch --list \"ss_web_*\" | xargs -t -I% git branch -D %"
    clean-branches = "!git branch --merged origin/master --no-column | grep -v '\\*\\| z-\\|master' | sed 's/\\-[a-z0-9]*$//' | xargs -I% git zbr %"
    view = "!git show $@ | view - && true"
    vlog = "!git log $(git merge-base HEAD origin/master)..HEAD \"$@\" | view - && true"
# From https://stackoverflow.com/questions/20240526/how-to-git-bisect-only-on-one-branchs-commits:
    bisect-merges = "!f() { git bisect start \"$1\" \"$2\" && git rev-list \"$2..$1\" --merges --first-parent | xargs -I% git rev-list \"%^2\" --not \"%^\" | xargs git bisect skip }; f"
    p = pull --rebase
    cb = "!git create-branch"
    st = status -u
    ls = status -u
    co = checkout
    br = branch --list '[^z]*' 'z[^-/]*'
    su = branch --set-upstream-to master
    lp = log -p
    ri = rebase -i
    rc = rebase --continue
    ci = commit -v
    alias = config --get-regexp ^alias
    rpl = "!git rebase-package-lock"
    zbr = "!git archive-branch"
    cbr = "!git clean-branches"
    annotate = blame
    ann = blame
    pr = "!git push -f origin HEAD:aria-$(/usr/bin/git rev-parse --abbrev-ref HEAD | sed -e 's/-[0-9a-z]$//')"
    fmt = "!cd -- ${GIT_PREFIX:-.} && npm run format && git commit -am 'Formatting: `npm run format`'"
    myprs = "!hub pr list -f '%au %pC %>(8) %i %Creset %t %l %Nc %n' | grep '^[^#]*ariabuckles[^#]*#' | sed 's/^[^#]*//'"
    assigned = "!hub pr list -f '%as %pC %>(8) %i %Creset %t %l %Nc %n' | grep '^[^#]*ariabuckles[^#]*#' | sed 's/^[^#]*//'"
    pr-message = "!git pr-message-title && echo && git pr-message-issues && git pr-message-changes && git pr-message-list && git pr-message-test"
    pr-message-title = "!git log -n1 --pretty=format:%s || true"
    pr-message-issues = "!echo '#### Github Issue Link' && echo && git pr-message-raw-issues && echo"
    pr-message-changes = "!echo '#### Changes' && echo && git pr-message-raw-body"
    pr-message-list = "!(echo 'This change consists of the following commits:' && echo && git pr-message-raw-list && echo) | jsed '/^[^\\n]*\\n\\n[^\\n]*\\n*$/' '' && echo"
    pr-message-test = "!echo '#### Testing Steps' && git pr-message-raw-test"
    pr-message-raw-issues = "!git log $(git merge-base HEAD origin/master)..HEAD --pretty=format:%b | grep '^\\S*\\s*\\S*/issues/' || true"
    pr-message-raw-body = "!git log $(git merge-base HEAD origin/master)..HEAD --pretty=format:'%bEND_OF_COMMIT' | jsed '/Test plan:[\\S\\s]*?END_OF_COMMIT\\s?/gi' '' || true"
    pr-message-raw-list = "!git log $(git merge-base HEAD origin/master)..HEAD --pretty=format:'1. %h %s' || true"
    pr-message-raw-test = "!git log $(git merge-base HEAD origin/master)..HEAD --pretty=format:'START_OF_COMMIT%bEND_OF_COMMIT' | jsed '/START_OF_COMMIT[\\S\\s]*?Test plan:\\s([\\S\\s]*?)END_OF_COMMIT\\s?/gi' '$1' || true"
    new-pr = "!git pr && git pr-message | read -d '' PR_MESSAGE && hub pull-request -c --head aria-$(/usr/bin/git rev-parse --abbrev-ref HEAD | sed -e 's/-[0-9a-z]$//') -m $PR_MESSAGE"
[core]
    excludesfile = ~/.gitignoreglobal
    hooksPath = ~/.githooks
    abbrev = 8
[merge]
    tool = vimdiff
    conflictstyle = diff3
[mergetool]
    prompt = false
